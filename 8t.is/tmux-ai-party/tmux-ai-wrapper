#!/bin/bash
# tmux-ai-wrapper - Smart launcher that uses uv if available! üß†

# Get the directory where this script is located
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
cd "$SCRIPT_DIR"

# Check if uv is installed and .venv doesn't exist (indicating uv project)
if command -v uv &> /dev/null && [ -f "pyproject.toml" ]; then
    # Use uv run for a modern experience! üöÄ
    exec uv run python tmux-ai "$@"
elif [ -f ".venv/bin/activate" ]; then
    # Traditional virtualenv approach
    source .venv/bin/activate
    exec python tmux-ai "$@"
else
    # Fallback to system Python (might work, might not!)
    echo "‚ö†Ô∏è  No virtual environment found. Running with system Python..."
    echo "   Recommend running: ./scripts/setup-uv.sh"
    exec python3 tmux-ai "$@"
fi